language: go
go:
- 1.12

sudo: required

dist: xenial

services:
- docker

env:
- RESYNC_PERIOD=30s GOFLAGS=-mod=vendor

before_install:
- sudo snap install microk8s --classic --channel=1.11/stable
- sudo snap alias microk8s.kubectl kubectl
- curl -L https://raw.githubusercontent.com/alecthomas/gometalinter/master/scripts/install.sh | bash -s -- -b $GOPATH/bin
- echo $PATH && ls -la $GOPATH/bin

install: true

script:
- ./ci/test.sh && ./ci/build.sh && ./ci/package.sh
